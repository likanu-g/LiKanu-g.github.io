<!DOCTYPE html>
<html lang=en>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
	<!--script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script-->
	<!--link href="//cdn.bootcss.com/pace/1.0.2/themes/pink/pace-theme-flash.css" rel="stylesheet"-->
	<script type="text/javascript" src="/js/pace.min.js"></script> 
	<!--script async src="/js/busuanzi.pure.mini.js"></script-->
    <meta name="description" content="本博客是Hexo+VPS的模式搭建，主题为Cactus，然后参考 https:&#x2F;&#x2F;alili.tech&#x2F;，这个博客进行了魔改，由于我并不是专业的做前端的，效果自然也达不到人家那么好，然后参考了一些网上的改自定义主题的教程改成现在这个样子。下面是关于搭建的教程：1、需要一个github的账号(其实没有也没多大问题，如果有vps，没有github的账号也无妨)2、如果第一次搭建建议现在虚拟机上搭建一遍">
<meta property="og:type" content="website">
<meta property="og:title" content="about">
<meta property="og:url" content="https://blog.likanug.top/about/index.html">
<meta property="og:site_name" content="Likanug&#39;s Blog">
<meta property="og:description" content="本博客是Hexo+VPS的模式搭建，主题为Cactus，然后参考 https:&#x2F;&#x2F;alili.tech&#x2F;，这个博客进行了魔改，由于我并不是专业的做前端的，效果自然也达不到人家那么好，然后参考了一些网上的改自定义主题的教程改成现在这个样子。下面是关于搭建的教程：1、需要一个github的账号(其实没有也没多大问题，如果有vps，没有github的账号也无妨)2、如果第一次搭建建议现在虚拟机上搭建一遍">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2019-12-31T04:26:44.000Z">
<meta property="article:modified_time" content="2020-08-09T11:59:42.000Z">
<meta property="article:author" content="Likanug">
<meta property="article:tag" content="java,go,c&#x2F;c++,大数据,linux,数据库">
<meta name="twitter:card" content="summary">
    
    
        
          
              <link rel="shortcut icon" href="../images/favicon.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="../images/favicon-192x192.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="../images/apple-touch-icon.png">
          
        
    
    <!-- title -->
    <title>about</title>
    <!-- styles -->
    
<link rel="stylesheet" href="../css/style.css">

    <!-- persian styles -->
    
      
<link rel="stylesheet" href="../css/rtl.css">

    
    <!-- rss -->
    
    
    <!-- styles -->

<link rel="stylesheet" href="../lib/font-awesome/css/all.min.css">


<link rel="stylesheet" href="../lib/justified-gallery/css/justifiedGallery.min.css">


<meta name="generator" content="Hexo 5.4.0"></head>

<body class="max-width mx-auto px3 ltr">
    
    <div class="content index py4">
        
          <header id="header">
  <a href="../index.html">
  
    
      <div id="logo" style="background-image: url(../images/logo.png);"></div>
    
  
    <div id="title">
      <h1>Likanug&#39;s Blog</h1>
    </div>
  </a>
  <div id="nav">
    <ul>
      <li class="icon">
        <a href="#"><i class="fas fa-bars fa-2x"></i></a>
      </li>
       
        <li><a href="../index.html">Home</a></li>
       
        <li><a href="../archives/">Writing</a></li>
       
        <li><a href="../about/">About</a></li>
      
    </ul>
  </div>
</header>

        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  

  <div class="content" itemprop="articleBody">
      
          <h5 id="本博客是Hexo-VPS的模式搭建，主题为Cactus，然后参考-https-alili-tech-，这个博客进行了魔改，由于我并不是专业的做前端的，效果自然也达不到人家那么好，然后参考了一些网上的改自定义主题的教程改成现在这个样子。下面是关于搭建的教程："><a href="#本博客是Hexo-VPS的模式搭建，主题为Cactus，然后参考-https-alili-tech-，这个博客进行了魔改，由于我并不是专业的做前端的，效果自然也达不到人家那么好，然后参考了一些网上的改自定义主题的教程改成现在这个样子。下面是关于搭建的教程：" class="headerlink" title="本博客是Hexo+VPS的模式搭建，主题为Cactus，然后参考 https://alili.tech/，这个博客进行了魔改，由于我并不是专业的做前端的，效果自然也达不到人家那么好，然后参考了一些网上的改自定义主题的教程改成现在这个样子。下面是关于搭建的教程："></a>本博客是Hexo+VPS的模式搭建，主题为Cactus，然后参考 <a target="_blank" rel="noopener" href="https://alili.tech/，这个博客进行了魔改，由于我并不是专业的做前端的，效果自然也达不到人家那么好，然后参考了一些网上的改自定义主题的教程改成现在这个样子。下面是关于搭建的教程：">https://alili.tech/，这个博客进行了魔改，由于我并不是专业的做前端的，效果自然也达不到人家那么好，然后参考了一些网上的改自定义主题的教程改成现在这个样子。下面是关于搭建的教程：</a></h5><h4 id="1、需要一个github的账号-其实没有也没多大问题，如果有vps，没有github的账号也无妨"><a href="#1、需要一个github的账号-其实没有也没多大问题，如果有vps，没有github的账号也无妨" class="headerlink" title="1、需要一个github的账号(其实没有也没多大问题，如果有vps，没有github的账号也无妨)"></a>1、需要一个github的账号(其实没有也没多大问题，如果有vps，没有github的账号也无妨)</h4><h4 id="2、如果第一次搭建建议现在虚拟机上搭建一遍，有些操作真的是自己搭建过才能体会到"><a href="#2、如果第一次搭建建议现在虚拟机上搭建一遍，有些操作真的是自己搭建过才能体会到" class="headerlink" title="2、如果第一次搭建建议现在虚拟机上搭建一遍，有些操作真的是自己搭建过才能体会到"></a>2、如果第一次搭建建议现在虚拟机上搭建一遍，有些操作真的是自己搭建过才能体会到</h4><h4 id="搭建环境-Windows-10和CentOS-7"><a href="#搭建环境-Windows-10和CentOS-7" class="headerlink" title="搭建环境:Windows 10和CentOS 7"></a>搭建环境:Windows 10和CentOS 7</h4><p>安装步骤如下</p>
<ul>
<li><h5 id="服务器端"><a href="#服务器端" class="headerlink" title="服务器端"></a>服务器端</h5><ul>
<li><h6 id="git服务安装"><a href="#git服务安装" class="headerlink" title="git服务安装"></a>git服务安装</h6><ul>
<li><p>yum安装</p>
</li>
<li><p>安装git</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install git -y</span><br></pre></td></tr></table></figure>
</li>
<li><p>验证安装</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@likanug conf]<span class="comment"># git --version</span></span><br><span class="line">git version 1.8.3.1   <span class="comment">#有版本号出现则说明安装成功</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>创建git用户和密码</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">useradd git</span><br><span class="line">passwd git</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建git仓库和设置权限</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git init --bare /home/git/blog.git   <span class="comment">#在/home/git下面创建一个空的blog.git仓库</span></span><br><span class="line">chown -R git:git /home/git/blog.git   <span class="comment"># 将blog.git这个仓库的所有者改成git</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><h6 id="安装nodejs"><a href="#安装nodejs" class="headerlink" title="安装nodejs"></a>安装nodejs</h6><ul>
<li><p>下载自行百度</p>
</li>
<li><p>安装</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -xvf node-v12.14.0-linux-x64.tar.xz -C /usr/<span class="built_in">local</span>/apps/</span><br></pre></td></tr></table></figure>
</li>
<li><p>配置环境变量</p>
<ul>
<li><p>在系统环境变量文件添加</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/profile</span><br><span class="line">  <span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:/usr/<span class="built_in">local</span>/apps/node-v12.14.0-linux-x64/bin</span><br><span class="line">  <span class="built_in">source</span> /etc/profile</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用软连接方式(推荐)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ln -s /usr/<span class="built_in">local</span>/apps/node-v12.14.0-linux-x64/bin/npm /usr/<span class="built_in">local</span>/bin/</span><br><span class="line">  ln -s /usr/<span class="built_in">local</span>/apps/node-v12.14.0-linux-x64/bin/node /usr/<span class="built_in">local</span>/bin/</span><br></pre></td></tr></table></figure>

</li>
</ul>
</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">      </span><br></pre></td></tr></table></figure>
</li>
<li><h6 id="nginx服务器安装"><a href="#nginx服务器安装" class="headerlink" title="nginx服务器安装"></a>nginx服务器安装</h6></li>
<li><p>下载</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget http://nginx.org/download/nginx-1.16.1.tar.gz</span><br></pre></td></tr></table></figure>
</li>
<li><p>解压</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar zxvf nginx-1.16.1.tar.gz -C /usr/<span class="built_in">local</span>/apps</span><br></pre></td></tr></table></figure>
</li>
<li><p>编译安装</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"> <span class="built_in">cd</span> /usr/<span class="built_in">local</span>/apps/nginx-1.16.1   <span class="comment">#进入安装目录</span></span><br><span class="line">./configure --with-http_ssl_module   <span class="comment">#配置并添加ssl模块</span></span><br><span class="line">  make</span><br><span class="line">ln -s /usr/<span class="built_in">local</span>/apps/nginx-1.16.1/sbin/nginx /usr/<span class="built_in">local</span>/bin</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><h5 id="本地"><a href="#本地" class="headerlink" title="本地"></a>本地</h5><ul>
<li><h6 id="安装git客户端"><a href="#安装git客户端" class="headerlink" title="安装git客户端"></a>安装git客户端</h6><ul>
<li><p>下载</p>
<ul>
<li><p>下载地址<a target="_blank" rel="noopener" href="https://git-scm.com/downloads">https://git-scm.com/downloads</a></p>
</li>
<li><p>用git客户端测试clone服务器端的仓库</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> git@192.168.211.50:~/blog.git </span><br><span class="line"><span class="comment">#在git用户下clone 这个blog.git仓库</span></span><br><span class="line"><span class="comment">#此时需要输入密码，</span></span><br><span class="line"><span class="comment">#如果没有报错，且仓库下载下来了，说明本地连接服务端没有问题</span></span><br></pre></td></tr></table></figure>



</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li><h6 id="安装nodejs-1"><a href="#安装nodejs-1" class="headerlink" title="安装nodejs"></a>安装nodejs</h6><ul>
<li><p>安装步骤请参考 <a target="_blank" rel="noopener" href="https://hexo.io/zh-cn/docs/">https://hexo.io/zh-cn/docs/</a></p>
</li>
<li><p>安装Hexo</p>
<ul>
<li>新建一个文件夹，打开git客户端鼠标右键Git bash here</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g hexo-cli</span><br></pre></td></tr></table></figure>

<ul>
<li><p>新建一个hexo网站</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">hexo init hexo</span><br><span class="line"><span class="built_in">cd</span> hexo</span><br><span class="line">npm install hexo-deployer-git --save  <span class="comment">#安装发布插件</span></span><br><span class="line">npm install  <span class="comment"># 至此hexo已经新建完成</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>本地运行测试</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo s -g</span><br></pre></td></tr></table></figure>
</li>
<li><p>打开浏览器查看</p>
<ul>
<li>浏览器打开 localhost:4000  #可以看到一个成功的网站</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="Git-Hooks自动部署配置"><a href="#Git-Hooks自动部署配置" class="headerlink" title="Git Hooks自动部署配置"></a>Git Hooks自动部署配置</h4><ul>
<li><p>本地hexo配置</p>
<ul>
<li>将hexo的_config.yml最后面修改成如下部分</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  <span class="built_in">type</span>: git</span><br><span class="line">  message: update</span><br><span class="line">  <span class="comment">#部署到github上的配置,username为你的github usernae</span></span><br><span class="line">  <span class="comment"># repository: git@github.com:&lt;username&gt;/&lt;username&gt;.github.io   </span></span><br><span class="line">  <span class="comment">#部署到自己vps上的配置IP为vps的ip</span></span><br><span class="line">  repo: git@&lt;IP地址&gt;:~/blog.git          </span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure>
</li>
<li><p>部署在github上</p>
<ul>
<li>首先要有一个github账号</li>
<li>在github上建立一个<username>.github.io的repositories(名字必须是这样的)</li>
<li>打开hexo所在的目录</li>
<li>编辑_config.yml文件<ul>
<li>移动到最后一行找到deploy所在的那一行,添加上面配置文件的内容</li>
<li>执行命令 hexo d -s  #提交发布到github上</li>
</ul>
</li>
<li>验证<ul>
<li>浏览器打开<username>.github.io域名即可访问自己的博客</li>
</ul>
</li>
</ul>
</li>
<li><p>部署咋vps(虚拟主机上)上</p>
<ul>
<li><p>部署原理</p>
<ul>
<li>我们在本地编辑文本，然后使用 Git 远程部署到 VPS 的 Git 仓库。hexo d 命令实际上只 deploy 了本地的 public 文件夹，Git Hooks 实际上就是当 Git 仓库收到最新的 push 时，将 Git 仓库接受到的内容复制到 VPS 上的网站目录内。相当于完成了手动将 public 文件夹复制到 VPS 的网站根目录里。</li>
</ul>
</li>
<li><p>创建网站目录</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /var/www/blog      <span class="comment">#创建blog目录</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>nginx配置</p>
<ul>
<li>配置文件如下</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen <span class="number">80</span>; #默认监听<span class="number">80</span>端口</span><br><span class="line">    root /<span class="keyword">var</span>/www/blog; #网站根目录</span><br><span class="line">    server_name likanug.top, blog.likanug.top; #网址</span><br><span class="line">    rewrite   ^(.*)$ https:<span class="comment">//$host$1 permanent;   #http请求通过rewrite重定向https</span></span><br><span class="line">    error_page <span class="number">404</span> = /<span class="number">404.</span>html;</span><br><span class="line"></span><br><span class="line">    location ~* ^.+\.(ico|gif|jpg|jpeg|png)$ &#123;</span><br><span class="line">        root /<span class="keyword">var</span>/www/blog;</span><br><span class="line">        access_log off;</span><br><span class="line">        expires <span class="number">1d</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    location ~* ^.+\.(css|js|txt|xml|swf|wav)$ &#123;</span><br><span class="line">        root /<span class="keyword">var</span>/www/blog;</span><br><span class="line">        access_log off;</span><br><span class="line">        expires 10m;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">        root /<span class="keyword">var</span>/www/blog;</span><br><span class="line">        <span class="keyword">if</span> (-f $request_filename) &#123;</span><br><span class="line">            rewrite ^/(.*)$ /$<span class="number">1</span> <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">server &#123;</span><br><span class="line">        listen       <span class="number">443</span> ssl default_server;</span><br><span class="line">        listen       [::]:<span class="number">443</span> ssl default_server;</span><br><span class="line">        server_name  likanug.top blog.likanug.top;</span><br><span class="line">        root         /<span class="keyword">var</span>/www/blog;</span><br><span class="line">        ssl_certificate     cert/blog.likanug.top.pem; <span class="comment">//ssl证书</span></span><br><span class="line">        ssl_certificate_key cert/blog.likanug.top.key; <span class="comment">////ssl证书key</span></span><br><span class="line"></span><br><span class="line">        ssl_session_cache    shared:SSL:1m;</span><br><span class="line">        ssl_session_timeout  5m;</span><br><span class="line">        ssl_ciphers          HIGH:!aNULL:!MD5;</span><br><span class="line">        ssl_protocols TLSv1 TLSv1<span class="number">.1</span> TLSv1<span class="number">.2</span>;</span><br><span class="line">        ssl_prefer_server_ciphers on;</span><br><span class="line"></span><br><span class="line">        location / &#123;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        error_page   <span class="number">404</span>  /<span class="number">404.</span>html;</span><br><span class="line">            location = 40x.html &#123;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        error_page   <span class="number">500</span> <span class="number">502</span> <span class="number">503</span> <span class="number">504</span>  /50x.html;</span><br><span class="line">            location = /50x.html &#123;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>启动nginx</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nginx   <span class="comment">#启动nginx服务 </span></span><br><span class="line">systemctl <span class="built_in">enable</span> nginx   <span class="comment">#nginx开机自启</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>git hooks配置</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /home/git/blog.git/hooks //切换到hooks目录下</span><br><span class="line">vim post-receive //创建文件</span><br></pre></td></tr></table></figure>

<ul>
<li>复制下面的内容到 post-receive 文件中：</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;post-receive hook is running...&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">GIT_REPO=/home/git/blog.git</span><br><span class="line">TMP_GIT_CLONE=/tmp/blog        <span class="comment">#这个/tmp/blog文件夹要创建,并设置用户为git</span></span><br><span class="line">PUBLIC_WWW=/var/www/blog</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">rm -rf <span class="variable">$&#123;TMP_GIT_CLONE&#125;</span></span><br><span class="line">git <span class="built_in">clone</span> <span class="variable">$GIT_REPO</span> <span class="variable">$TMP_GIT_CLONE</span></span><br><span class="line">rm -rf <span class="variable">$&#123;PUBLIC_WWW&#125;</span>/*</span><br><span class="line">cp -rf <span class="variable">$&#123;TMP_GIT_CLONE&#125;</span>/* <span class="variable">$&#123;PUBLIC_WWW&#125;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>为什么不直接将裸仓库克隆到 Web 根目录下呢？感觉先克隆到 tmp 目录再拷贝到 Web 根目录是多此一举。后来我觉得可能是出于项目安全的考虑，在执行 cp 命令的时候，.git 作为隐藏目录不会被拷贝到 Web 根目录下，也就避免了将整个仓库历史暴露在 Web 服务中。</p>
</li>
<li><p>赋予可执行权限和git用户权限：</p>
</li>
</ul>
<figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">chown git:git -R <span class="meta-keyword">/var/</span>www/blog  <span class="comment">//博客的目录</span></span><br><span class="line">chown git:git -R <span class="meta-keyword">/tmp/</span>blog  <span class="comment">//临时文件目录</span></span><br><span class="line"></span><br><span class="line">chmod +x post-receive</span><br></pre></td></tr></table></figure>
</li>
<li><p>本地发布</p>
<ul>
<li>执行命令 hexo d -s  #提交发布到vps的git上</li>
</ul>
</li>
<li><p>验证网站</p>
<ul>
<li>浏览器打开域名blog.likanug.top即可访问</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="本地免密登录服务器"><a href="#本地免密登录服务器" class="headerlink" title="本地免密登录服务器"></a>本地免密登录服务器</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa <span class="comment">#生成ssh密钥，密钥生成目录为C:\Users\xxx\.ssh\id_rsa.pub</span></span><br><span class="line"><span class="comment">#打开.pub文件，复制文件内容</span></span><br><span class="line"><span class="comment">#追加到服务器上的/home/git/.ssh/authorized_keys</span></span><br></pre></td></tr></table></figure>



<h4 id="hexo常用命令"><a href="#hexo常用命令" class="headerlink" title="hexo常用命令"></a>hexo常用命令</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">hexo new <span class="string">&quot;postName&quot;</span> <span class="comment">#新建文章</span></span><br><span class="line">hexo new page <span class="string">&quot;pageName&quot;</span> <span class="comment">#新建页面</span></span><br><span class="line">hexo generate <span class="comment">#生成静态页面至public目录</span></span><br><span class="line">hexo server <span class="comment">#开启预览访问端口（默认端口4000，&#x27;ctrl + c&#x27;关闭server）</span></span><br><span class="line">hexo deploy <span class="comment">#部署到GitHub</span></span><br><span class="line">hexo <span class="built_in">help</span> <span class="comment"># 查看帮助</span></span><br><span class="line">hexo version <span class="comment">#查看Hexo的版本</span></span><br></pre></td></tr></table></figure>

<p>缩写</p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">hexo n == hexo <span class="keyword">new</span></span><br><span class="line">hexo g == hexo <span class="keyword">generate</span></span><br><span class="line">hexo s == hexo server</span><br><span class="line">hexo d == hexo deploy</span><br></pre></td></tr></table></figure>

<p>发布命令</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">hexo</span> s -g <span class="comment">#生成并本地预览 测试</span></span><br><span class="line">hexo d -g <span class="comment">#生成并上传 生产</span></span><br></pre></td></tr></table></figure>


        
  </div>
</article>

    <div class="blog-post-comments">
        
            
            <div class="vcomment"></div>
        
    </div>



        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2021 Likanug
    <a href="http://www.beian.miit.gov.cn" rel="external nofollow noopener noreferrer" target="_blank"></a>
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="../index.html">Home</a></li>
         
          <li><a href="../archives/">Writing</a></li>
         
          <li><a href="../about/">About</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

        <!-- jquery -->

<script src="../lib/jquery/jquery.min.js"></script>


<script src="../lib/justified-gallery/js/jquery.justifiedGallery.min.js"></script>

<!-- clipboard -->


<script src="../js/main.js"></script>

<!-- search -->

<!-- Valine Comments -->

  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <script src="//unpkg.com/valine@latest/dist/Valine.min.js"></script>
  <script type="text/javascript">
      var notify = 'false' == true ? true : false;
      var verify = 'false' == true ? true : false;
      var GUEST_INFO = ['nick','mail','link'];
      var guest_info = 'nick,mail,link'.split(',').filter(function(item){
        return GUEST_INFO.indexOf(item) > -1
      });
      guest_info = guest_info.length == 0 ? GUEST_INFO :guest_info;
      new Valine({
          el: '.vcomment',
          notify: notify,
          verify: verify,
          appId: "lJPojt39F66YItEiORkKhHp1-9Nh9j0Va",
          appKey: "L3RsjYdcE6GdDUciAgeyjlfn",
          avatar:"mm",
          placeholder: "Just go go",
          guest_info:guest_info,
          pageSize:"10"
      })
  </script>

<!-- Google Analytics -->

<!-- Baidu Analytics -->

    <script type="text/javascript">
        var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?2e6da3c375c8a87f5b664cea6d4cb29c";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();
    </script>


    </div>
</body>
</html>
